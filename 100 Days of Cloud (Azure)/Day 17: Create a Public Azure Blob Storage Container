Day 17: Create a Public Azure Blob Storage Container:
As part of the data migration process, the Nautilus DevOps team is actively creating several storage containers on Azure. They plan to utilize public Blob containers to store the relevant data. Given the ongoing migration of other infrastructure to Azure, it is logical to consolidate data storage within the Azure environment as well.

Create a new storage account named datacenterst2395 and a public Blob container named datacenter-blob-27159 within the storage account. Make sure anonymous read access for containers and blobs is enabled.



Use below given Azure Credentials: (You can run the showcreds command on the azure-client host to retrieve credentials)

Portal URL	https://portal.azure.com
Username	kk_lab_user_main-4f47cc30a0304dc0@azurefreekmlprod.onmicrosoft.com
Password	rTK$uA%T
Start Time	Fri Dec 12 03:58:06 UTC 2025
End Time	Fri Dec 12 04:58:06 UTC 2025

SOLUTION:

Simple Explanation of Day 17 Lab
Today you're creating a public cloud storage locker in Azure. Think of it like this:

Storage Account (datacenterst2395) = The entire storage building

Blob Container (datacenter-blob-27159) = One public locker inside that building

Public = Anyone with the URL can see the files inside (like public photo albums)

This is the opposite of Day 16! You're setting up cloud storage where files can be accessed by anyone on the internet, perfect for hosting website images, public documents, or downloadable files.

Single-Line Commands for Day 17 Lab
1. Login to Azure:

bash
az login -u kk_lab_user_main-4f47cc30a0304dc0@azurefreekmlprod.onmicrosoft.com -p "rTK$uA%T"
2. Create Storage Account (Public Access Enabled):

bash
az storage account create --resource-group kml_rg_main-4f47cc30a0304dc0 --name datacenterst2395 --location eastus --sku Standard_LRS --allow-blob-public-access true
3. Create Public Container:

bash
az storage container create --account-name datacenterst2395 --name datacenter-blob-27159 --public-access blob --auth-mode login
4. Verify Creation:

bash
az storage container show --account-name datacenterst2395 --name datacenter-blob-27159 --auth-mode login --query "{Name:name, PublicAccess:properties.publicAccess}"
5. Quick Status Check:

bash
az storage account show --resource-group kml_rg_main-4f47cc30a0304dc0 --name datacenterst2395 --query "{Name:name, PublicAccess:allowBlobPublicAccess, Status:provisioningState}"
Expected Results:
Storage account created with allowBlobPublicAccess: true

Container created with PublicAccess: "blob"

Both show "Succeeded" status

Note: If datacenterst2395 name is taken, add random numbers like datacenterst2395XX


Here are the corrected commands to create the public storage account and container.

Step-by-Step Commands
Run these commands in order:

Log in to Azure with the new credentials for this lab session:

bash
az login -u kk_lab_user_main-65bd502d5d9a42fb@azurefreekmlprod.onmicrosoft.com -p BW3F6pQa
Create the storage account, ensuring anonymous access is allowed at the account level:

bash
az storage account create --resource-group kml_rg_main-65bd502d5d9a42fb --name nautilusst23477 --location eastus --sku Standard_LRS --allow-blob-public-access true
Wait 30-60 seconds for the account to fully provision, then create the public container with the correct access level:

bash
sleep 45 && az storage container create --account-name nautilusst23477 --name nautilus-blob-19929 --public-access container --auth-mode key
Verification Command
To confirm the container was created with the correct public access level, run:

bash
az storage container show --account-name nautilusst23477 --name nautilus-blob-19929 --auth-mode key --query "properties.publicAccess" -o tsv
Expected output: container

If the output shows container, your configuration is correct for this lab. If it shows None or blob, the container was not created with the required public access level.

The main change from the previous attempt is using --public-access container (in step 3), which aligns with the lab's requirement for "anonymous read access for containers and blobs".






