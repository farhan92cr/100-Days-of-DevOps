The Nautilus DevOps team is migrating a portion of their infrastructure to Azure. During the migration, they have created several virtual machines (VMs) in different regions. The team has identified one VM that is not tagged properly so they decided to tag it as needed.

Add the tag Environment=dev to the virtual machine named nautilus-vm.



Use the below given Azure Credentials: (You can run the showcreds command on the azure-client host to retrieve these credentials)

Portal URL	https://portal.azure.com
Username	kk_lab_user_main-353a645b3e2a476f@azurefreekmlprod.onmicrosoft.com
Password	PH$#TX8F
Start Time	Mon Dec 08 04:01:22 UTC 2025
End Time	Mon Dec 08 05:01:22 UTC 2025

SOLTION:




Simple Explanation of Day 12 Lab
Today you're adding tags to a Virtual Machine. Tags are like labels or metadata you attach to Azure resources. Think of it like putting a sticky note on a file folder saying "Environment=dev" - this helps you organize, search, and manage your resources better.

You're adding one specific tag: Environment=dev to the VM named nautilus-vm.

Step-by-Step Solution (Using Azure CLI)
Step 1: Login to Azure
bash
az login -u kk_lab_user_main-353a645b3e2a476f@azurefreekmlprod.onmicrosoft.com -p PH$#TX8F
Step 2: Check Current Tags (Optional)
bash
# Check if VM exists
az vm show --resource-group <YOUR_RESOURCE_GROUP> --name nautilus-vm --query name

# Check current tags on the VM
az vm show --resource-group <YOUR_RESOURCE_GROUP> --name nautilus-vm --query tags
Step 3: Add the Tag
bash
az vm update \
  --resource-group <YOUR_RESOURCE_GROUP> \
  --name nautilus-vm \
  --set tags.Environment=dev
Single line version:

bash
az vm update --resource-group <YOUR_RESOURCE_GROUP> --name nautilus-vm --set tags.Environment=dev
Step 4: Verify the Tag Was Added
bash
# Check the tag
az vm show --resource-group <YOUR_RESOURCE_GROUP> --name nautilus-vm --query "{Name:name, Tags:tags}"

# Alternative: Just show the Environment tag
az vm show --resource-group <YOUR_RESOURCE_GROUP> --name nautilus-vm --query "tags.Environment"
Step 5: List All Resources with Environment Tag (Optional)
bash
# Find all VMs with Environment tag
az resource list --tag Environment --query "[].{Name:name, Type:type, Environment:tags.Environment}" -o table
Step-by-Step Solution (Using Azure UI/Portal)
Step 1: Login to Azure Portal
Go to https://portal.azure.com

Use credentials provided

Step 2: Navigate to the VM
Search for nautilus-vm in the search bar

Click on the VM

Step 3: Add Tags
Click "Tags" in the left menu (under Settings)

Click "+ Add tag"

Enter:

Name: Environment

Value: dev

Click "Apply" at the top

Step 4: Verify the Tag
Go to the VM's "Overview" page

Scroll down to see the "Tags" section

You should see Environment: dev

Or go back to "Tags" page to see the tag listed

Step 5: Alternative Verification
Go to "All resources"

Find nautilus-vm in the list

Look at the "Tags" column (you may need to add this column)

Key Terms Explained
Tags: Key-value pairs (metadata) attached to Azure resources for organization.

Key: Environment

Value: dev

Tag Purpose: Help organize, search, filter, and manage resources.

Tag Rules:

Max 50 tags per resource

Keys: 1-512 characters

Values: 0-256 characters

Case-sensitive

Benefits and Use Cases
Why use tags?

Cost Management: Group resources by department/project for billing

Resource Organization: Find related resources easily

Automation: Apply policies based on tags

Access Control: Grant permissions based on tags

Monitoring: Filter alerts and metrics by tags

Common Tag Examples:

Environment=dev/test/prod

Department=IT/HR/Sales

Project=ProjectX

CostCenter=12345

Owner=johndoe

Application=WebApp/Database

Important Notes
VM State: You can add tags to a VM whether it's running or stopped

No Restart Needed: Adding tags doesn't require VM restart

Inheritance: Tags on resource groups don't automatically apply to resources inside them

Querying: You can search/filter resources by tags in portal and CLI

Policies: Azure Policy can enforce tagging rules

Complete CLI Example:
bash
# 1. Login
az login -u kk_lab_user_main-353a645b3e2a476f@azurefreekmlprod.onmicrosoft.com -p PH$#TX8F

# 2. Find resource group
az group list --output table
# Output: kml_rg_main-xxxxx

# 3. Add tag (replace YOUR_RG)
az vm update --resource-group YOUR_RG --name nautilus-vm --set tags.Environment=dev

# 4. Verify
az vm show --resource-group YOUR_RG --name nautilus-vm --query "tags"

# 5. Quick verification
az vm show --resource-group YOUR_RG --name nautilus-vm --query "{Name:name, EnvironmentTag:tags.Environment}"
Expected results:

Command completes without errors

Verification shows "Environment": "dev"

The tag is now attached to the VM

Advanced Tag Operations (For Reference)
bash
# Add multiple tags at once
az vm update --resource-group YOUR_RG --name nautilus-vm --set tags.Environment=dev tags.Department=IT tags.Project=Nautilus

# Remove a specific tag
az vm update --resource-group YOUR_RG --name nautilus-vm --remove tags.Environment

# Replace all tags (removes existing, adds new)
az vm update --resource-group YOUR_RG --name nautilus-vm --tags Environment=prod Department=Finance

# List all VMs with specific tag
az vm list --query "[?tags.Environment=='dev'].{Name:name, RG:resourceGroup}" -o table
You've successfully added organizational metadata to your VM! This is crucial for managing large cloud environments efficiently.


