The Nautilus DevOps team has been creating a couple of services on AWS cloud. They have been breaking down the migration into smaller tasks, allowing for better control, risk mitigation, and optimization of resources throughout the migration process. Recently they came up with requirements mentioned below.

An instance named devops-ec2 and a volume named devops-volume already exists in us-east-1 region. Attach the devops-volume volume to the devops-ec2 instance, make sure to set the device name to /dev/sdb while attaching the volume.



Use below given AWS Credentials: (You can run the showcreds command on aws-client host to retrieve these credentials)

Console URL	https://187354226259.signin.aws.amazon.com/console?region=us-east-1
Username	kk_labs_user_398443
Password	qI6EUARWgLSx
Start Time	Mon Dec 08 05:16:33 UTC 2025
End Time	Mon Dec 08 06:16:33 UTC 2025
Notes:

Create the resources only in us-east-1 region.

To display or hide the terminal of the AWS client machine, you can use the expand toggle button as shown below:


SOLUTION:



ğŸ’¾ Day 12 Lab: Attaching EBS Volume to EC2 Instance
ğŸ“– Lab Explanation
Today, we're attaching an EBS volume to an EC2 instance. This adds persistent block storage to our instance, which can be used for data storage, databases, or application files. We're specifically attaching it as /dev/sdb (second block device).

ğŸ” Key Terms Defined
EBS Volume Attachment
What: Connecting a block storage volume to an EC2 instance

Purpose: Provide additional storage beyond the root volume

Persistence: Data remains after instance stop/start

Device Names
/dev/sda1: Typically the root volume

/dev/sdb: First additional volume (what we're using)

/dev/sdc, /dev/sdd, etc.: Subsequent volumes

/dev/xvdb: Alternative naming (Xen-based instances)

Volume States
Available: Created but not attached

In-use: Attached to an instance

Attaching: In process of attaching

Detaching: In process of detaching

ğŸš€ Benefits & Why We Attach Volumes
ğŸ”§ Technical Advantages
Additional Storage: Expand storage beyond root volume

Data Persistence: Store data separately from OS

Performance: Different volume types for different needs

Snapshot Backups: Independent backup of data volume

ğŸ’¡ Use Case Benefits
Database Storage: Store database files on separate volume

Application Data: Keep app data separate from OS

Log Storage: Store logs on dedicated volume

Temporary Data: Scratch space for processing

ğŸ¯ Common Use Cases
Database Servers: Data files on separate volume

Web Servers: Website content on data volume

Media Servers: Large media files storage

Backup Storage: Target for backup operations

âš ï¸ Important Considerations
AZ Bound: Volume must be in same AZ as instance

Attachment Limit: Depends on instance type

Device Names: Consistent within instance lifecycle

ğŸ› ï¸ Step-by-Step Solution
Method: AWS Management Console
Login to AWS Console

bash
# Use the provided credentials:
URL: https://187354226259.signin.aws.amazon.com/console?region=us-east-1
Username: kk_labs_user_398443
Password: qI6EUARWgLSx
Region: us-east-1 (VERIFY THIS!)
Verify Resources Exist

Go to Services â†’ EC2

Check:

Instances: devops-ec2 exists and is running

Volumes: devops-volume exists and is "available"

Attach Volume to Instance

Go to Volumes section

Select devops-volume

Click Actions â†’ Attach volume

Instance: Select devops-ec2 from dropdown

Device name: Enter /dev/sdb (EXACTLY as specified)

Click Attach

Verify Attachment

Volume status changes from "available" to "in-use"

Attachments field shows instance ID

Device field shows /dev/sdb

Refresh page to confirm

Verify on Instance (Optional - if you can SSH)

bash
# SSH to instance (if you have key)
ssh -i your-key.pem ec2-user@<instance-ip>

# Check block devices
lsblk
# Should show sdb (or xvdb)

# Check if volume is detected
sudo fdisk -l
# Should list /dev/sdb
ğŸ“‹ What We Configured
Volume: devops-volume â†’ Attached to devops-ec2

Device Name: /dev/sdb

Result: Instance now has additional 2 GiB storage at /dev/sdb

ğŸ”§ Alternative Method: AWS CLI
bash
# Get instance ID
INSTANCE_ID=$(aws ec2 describe-instances \
  --filters "Name=tag:Name,Values=devops-ec2" \
  --query "Reservations[0].Instances[0].InstanceId" \
  --output text)

# Get volume ID
VOLUME_ID=$(aws ec2 describe-volumes \
  --filters "Name=tag:Name,Values=devops-volume" \
  --query "Volumes[0].VolumeId" \
  --output text)

# Attach volume
aws ec2 attach-volume \
  --volume-id $VOLUME_ID \
  --instance-id $INSTANCE_ID \
  --device /dev/sdb

# Check status
aws ec2 describe-volumes \
  --volume-ids $VOLUME_ID \
  --query "Volumes[0].Attachments[0].State"
ğŸ” Post-Attachment OS Configuration
Note: Volume is attached but not yet usable by OS

On Linux Instance (if you could SSH):
bash
# 1. Check volume is detected
lsblk
# Should show /dev/sdb

# 2. Create filesystem (WARNING: erases data!)
sudo mkfs -t ext4 /dev/sdb

# 3. Create mount point
sudo mkdir /data

# 4. Mount volume
sudo mount /dev/sdb /data

# 5. Auto-mount on boot (add to /etc/fstab)
echo "/dev/sdb /data ext4 defaults 0 0" | sudo tee -a /etc/fstab
âš ï¸ Important Notes
Device Name: Must match exactly /dev/sdb

AZ Requirement: Volume and instance must be in same AZ

Instance State: Can attach while instance is running (hot-attach)

Data Warning: If volume has existing data, mounting may require care

ğŸ” Security Considerations
Encryption: Consider encrypted volumes for sensitive data

Permissions: Set correct file permissions after mounting

Backup: Use EBS snapshots for backup

Monitoring: Monitor volume performance and space

ğŸ”„ Detachment Process
bash
# On instance: unmount first
sudo umount /dev/sdb

# Then detach in AWS
aws ec2 detach-volume --volume-id $VOLUME_ID
ğŸ“Š Storage Architecture
text
devops-ec2 Instance:
â”œâ”€â”€ /dev/sda1 (root volume) - OS and applications
â””â”€â”€ /dev/sdb (devops-volume) - Additional data storage
ğŸ‰ Congratulations!
You've completed Day 12! Your EC2 instance now has additional block storage attached. The volume is ready to be formatted, mounted, and used for data storage.

Next Steps (if continuing configuration):

Format the volume with a filesystem

Mount it to a directory

Configure auto-mount on boot

Set appropriate permissions

Ready for Day 13! ğŸš€



