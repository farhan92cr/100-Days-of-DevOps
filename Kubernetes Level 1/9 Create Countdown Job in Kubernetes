The Nautilus DevOps team is crafting jobs in the Kubernetes cluster. While they're developing actual scripts/commands, they're currently setting up templates and testing jobs with dummy commands. Please create a job template as per details given below:


Create a job named countdown-xfusion.

The spec template should be named countdown-xfusion (under metadata), and the container should be named container-countdown-xfusion

Utilize image debian with latest tag (ensure to specify as debian:latest), and set the restart policy to Never.

Execute the command sleep 5

Note: The kubectl utility on jump_host is set up to operate with the Kubernetes cluster.


SOLUTION:

Explanation of the Lab
This lab introduces Jobs - Kubernetes resources for running one-time or batch tasks that run to completion (unlike long-running applications).

New Terms Explained:
Job:

What: A Kubernetes resource that creates one or more pods and ensures they run to successful completion

Why use it: For batch processing, one-time tasks, database migrations, data processing

Real-world analogy: Like hiring a contractor to complete a specific task (build a wall) - they work until done, then leave

Key Differences: Job vs Deployment:

Job: Runs to completion and stops (one-time tasks)

Deployment: Runs continuously (web servers, APIs)

Job: Good for batch processing, migrations, backups

Deployment: Good for long-running services

Step-by-Step Solution
Step 1: Create the Job YAML file
bash
cat > countdown-xfusion-job.yaml << EOF
apiVersion: batch/v1
kind: Job
metadata:
  name: countdown-xfusion
spec:
  template:
    metadata:
      name: countdown-xfusion
    spec:
      containers:
      - name: container-countdown-xfusion
        image: debian:latest
        command: ["sleep", "5"]
      restartPolicy: Never
EOF
Step 2: Apply the Job
bash
kubectl apply -f countdown-xfusion-job.yaml
Step 3: Monitor the Job execution
bash
# Check Job status
kubectl get job countdown-xfusion

# Watch the pods created by the job
kubectl get pods --watch

# Check job details
kubectl describe job countdown-xfusion
Step 4: Verification after completion
bash
# Wait for the job to complete (about 5 seconds)
sleep 10

# Check final status
kubectl get job countdown-xfusion

# Check the pod logs (get the pod name first)
kubectl get pods -l job-name=countdown-xfusion
kubectl logs <pod-name>
Real-World Analogy üõ†Ô∏è
Think of this Job like a One-Time Construction Project:

yaml
apiVersion: batch/v1
kind: Job                    # "Construction Project Manager" üë∑
metadata:
  name: countdown-xfusion    # "Build XFusion Wall Project"
spec:
  template:
    metadata:
      name: countdown-xfusion  # "Project Blueprint Name"
    spec:
      containers:
      - name: container-countdown-xfusion  # "Construction Worker"
        image: debian:latest               # "Using professional tools"
        command: ["sleep", "5"]            # "Task: Wait 5 seconds (simulate work)"
      restartPolicy: Never                 # "Don't restart if worker finishes"
What Happens:
Job created ‚Üí Kubernetes creates a Pod

Pod runs ‚Üí Executes sleep 5 command

Command completes ‚Üí Pod goes to "Completed" status

Job finished ‚Üí No more pods created

Expected Output:
Immediately after creation:

text
NAME                COMPLETIONS   DURATION   AGE
countdown-xfusion   0/1           5s         5s

NAME                              READY   STATUS    RESTARTS   AGE
countdown-xfusion-abc123          1/1     Running   0          5s
After completion (5+ seconds):

text
NAME                COMPLETIONS   DURATION   AGE
countdown-xfusion   1/1           5s         30s

NAME                              READY   STATUS      RESTARTS   AGE
countdown-xfusion-abc123          0/1     Completed   0          30s
Key Learning Points:
Jobs are for one-time tasks that need to run to completion

RestartPolicy: Never means don't restart if the container exits

Completed status indicates successful execution

Jobs automatically manage pods - create, monitor, and track completion

This job will run exactly once, execute the sleep 5 command, and then complete successfully! ‚úÖ







