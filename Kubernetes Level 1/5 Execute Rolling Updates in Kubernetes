An application currently running on the Kubernetes cluster employs the nginx web server. The Nautilus application development team has introduced some recent changes that need deployment. They've crafted an image nginx:1.17 with the latest updates.


Execute a rolling update for this application, integrating the nginx:1.17 image. The deployment is named nginx-deployment.

Ensure all pods are operational post-update.

Note: The kubectl utility on jump_host is set up to operate with the Kubernetes cluster

SOLUTION:

Short Explanation
This lab requires performing a rolling update to change the container image in an existing deployment from the current version to nginx:1.17.

Solution
# Perform rolling update to change the image
kubectl set image deployment/nginx-deployment nginx=nginx:1.17

# Check the rollout status
kubectl rollout status deployment/nginx-deployment

# Verify all pods are running with new image
kubectl get pods -l app=nginx-deployment

# Check the current image version
kubectl describe deployment nginx-deployment | grep Image
Alternative Method (using edit):
bash
kubectl edit deployment nginx-deployment
# Then change the image to nginx:1.17 manually
The rolling update will gradually replace old pods with new ones using the updated image, ensuring zero downtime.

OR:

# First, check the actual container name in the deployment
kubectl describe deployment nginx-deployment

# Look for the container name in the output, then use that name:
kubectl set image deployment/nginx-deployment [container-name]=nginx:1.17

# Or edit the deployment to see the container name
kubectl edit deployment nginx-deployment

